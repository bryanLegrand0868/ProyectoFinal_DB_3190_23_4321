<div class="carrito-container">
  <div class="carrito-header">
    <h1>ğŸ›’ Mi Carrito de Compras</h1>
    <button class="clear-cart-btn" (click)="confirmClearCart()" [disabled]="isCartEmpty()">
      ğŸ—‘ï¸ Vaciar carrito
    </button>
  </div>

  <!-- Carrito vacÃ­o -->
  <div class="empty-cart" *ngIf="isCartEmpty()">
    <span class="empty-icon">ğŸ›’</span>
    <h2>Tu carrito estÃ¡ vacÃ­o</h2>
    <p>Agrega productos para comenzar tu compra</p>
    <button class="shop-btn" (click)="continueShopping()">
      ğŸ›ï¸ Ir a comprar
    </button>
  </div>

  <!-- Carrito con productos -->
  <div class="carrito-content" *ngIf="!isCartEmpty()">
    <!-- Lista de productos -->
    <div class="cart-items-section">
      <h2>Productos ({{ cartItems.length }})</h2>

      <div class="cart-item" *ngFor="let item of cartItems">
        <div class="item-image">
          <img [src]="item.imagen_url || 'assets/no-image.png'" [alt]="item.nombre">
        </div>

        <div class="item-details">
          <h3 class="item-name">{{ item.nombre }}</h3>
          <div class="item-meta">
            <span *ngIf="item.categoria">ğŸ·ï¸ {{ item.categoria }}</span>
            <span *ngIf="item.marca">ğŸ“Œ {{ item.marca }}</span>
          </div>
          <p class="item-price-unit">Precio unitario: Q{{ item.precio_venta | number:'1.2-2' }}</p>
        </div>

        <div class="item-quantity">
          <label>Cantidad</label>
          <div class="quantity-controls">
            <button class="qty-btn" (click)="decrementQuantity(item)">-</button>
            <input type="number"
                   [(ngModel)]="item.cantidad"
                   (change)="updateQuantity(item, item.cantidad)"
                   min="1"
                   class="quantity-input">
            <button class="qty-btn" (click)="incrementQuantity(item)">+</button>
          </div>
        </div>

        <div class="item-subtotal">
          <label>Subtotal</label>
          <p class="subtotal-price">Q{{ item.subtotal | number:'1.2-2' }}</p>
        </div>

        <div class="item-actions">
          <button class="remove-btn" (click)="confirmRemove(item)">ğŸ—‘ï¸</button>
        </div>
      </div>
    </div>

    <!-- Resumen del pedido -->
    <div class="order-summary">
      <h2>Resumen del Pedido</h2>

      <div class="summary-section">
        <div class="summary-row">
          <span>Subtotal:</span>
          <span>Q{{ subtotal | number:'1.2-2' }}</span>
        </div>

        <div class="summary-row">
          <span>IVA (13%):</span>
          <span>Q{{ iva | number:'1.2-2' }}</span>
        </div>

        <div class="summary-row">
          <span>EnvÃ­o:</span>
          <span>Q{{ shippingCost | number:'1.2-2' }}</span>
        </div>

        <div class="summary-divider"></div>

        <div class="summary-row summary-total">
          <span>Total:</span>
          <span class="total-value">Q{{ total | number:'1.2-2' }}</span>
        </div>
      </div>

      <div class="summary-info">
        â„¹ï¸ El envÃ­o serÃ¡ calculado segÃºn tu ubicaciÃ³n en el checkout
      </div>

      <div class="summary-actions">
        <button class="continue-shopping-btn" (click)="continueShopping()">
          â† Continuar comprando
        </button>

        <button class="checkout-btn" (click)="proceedToCheckout()">
          Proceder al pago â†’
        </button>
      </div>

      <!-- MÃ©todos de pago aceptados -->
      <div class="payment-methods">
        <p>MÃ©todos de pago aceptados:</p>
        <div class="payment-icons">
          <span>ğŸ’³</span>
          <span>ğŸ’°</span>
          <span>ğŸ¦</span>
        </div>
      </div>
    </div>
  </div>
</div>